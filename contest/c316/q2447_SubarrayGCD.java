import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;

import java.util.HashMap;
import java.util.Map;

public class q2447_SubarrayGCD {
    private void printSubarray(int[] nums, int i, int j) {
        for (int k = i; k <= j; k++) {
            System.out.print(nums[k] + " ");
        }
        System.out.println();
    }

    private int GCD(int a, int b) {
        while (b > 0) {
            int remainder = a % b;
            a = b;
            b = remainder;
        }
        return a;
    }

    public int subarrayGCD(int[] nums, int k) {
        int count = 0;
        for (int i = 0; i < nums.length; i++) { // start index
            int gcd = nums[i];
            if (gcd == k) {
                count += 1;
            }
            for (int j = i + 1; j < nums.length; j++) { // end index
                gcd = GCD(gcd, nums[j]);
                if (gcd < k) {
                    break;
                }
                if (gcd == k) {
                    count += 1;
                }
            }
        }
        return count;
    }

    @Test
    public void test() {
        Assertions.assertEquals(4, subarrayGCD(new int[] {9,3,1,2,6,3}, 3));
        Assertions.assertEquals(0, subarrayGCD(new int[] {4}, 7));
        Assertions.assertEquals(2, subarrayGCD(new int[] {8, 4, 1, 2, 6}, 2));
        Assertions.assertEquals(1, subarrayGCD(new int[] {1}, 1));
        Assertions.assertEquals(7, subarrayGCD(new int[] {3,12,9,6}, 3));
        int[] arr = {340235795,342703029,718088058,942334784,91298119,388860559,276004742,376942776,322351675,157017314,125466451,840561853,476164105,860071325,298500335,616507459,206536393,640951063,498611514,284386240,478705094,617287560,746087909,96529306,689427150,832010801,174711504,800666631,524359807,943978734,529428249,468840581,842455801,397471124,756109823,158565787,434674815,719327861,321482629,240568779,419280748,728182777,881180309,139657239,508511001,155081218,137645125,930137210,505149861,345170922,608048894,436516631,548526496,109486695,475580870,107594127,656868101,334284087,6124377,744602493,495219452,7000405,981299658,764537256,420563529,378330331,823803808,252898677,454091171,376133175,669847589,478546558,106234622,822688656,167830567,287686862,396994137,190949951,864390034,400830795,685489096,479593789,633051964,702471409,533838061,60820166,381825936,156919164,193517765,235810698,500564941,472852670,496158798,43487498,808572543,153584586,953914332,466663722,488093413,102547420,937992258,413027022,824868020,218923832,111211948,767106871,929279407,148714111,57919021,646037068,562637578,885892251,501815440,48726931,36548463,109027355,700504737,209202179,540880631,579412310,692229480,377208863,156976870,835342971,665304799,441284558,359204665,63208817,965255150,221002303,306267646,899932777,553753009,714840913,483248523,325311756,245826069,76048717,986267747,838124556,681158227,270472776,594332100,320098822,169705053,443319100,566824191,908447799,230961155,528855381,544545568,667180302,765361533,54182950,857390852,687594998,57122553,593894755,271798263,633027810,12168291,471552592,658133195,57054239,477071792,77878258,259006119,957312210,704716977,450137832,895331839,201470996,566229198,606513087,261324833,896569894,844164562,327437177,17654626,1747555,211300228,649399024,423961646,481842622,939742837,697899749,261867958,652045332,928548376,34533428,586086279,885125728,28839419,301101681,153251386,488860879,744167837,433238704,587514457,877643533,95484418,424295652,133131132,476690847,594446836,895300071,237645846,288006381,950776376,207308342,864608063,137574508,102155375,953224190,585811346,307345117,450118076,891254141,73195515,244080062,904465786,639220169,766328290,329734962,127228705,236902840,67240449,180659785,479448262,391270896,40409227,446049426,788543754,753822606,922508806,601043682,148574249,46905857,180050377,887631292,568480542,801370436,186381329,715008795,602420580,495102948,615372769,725092701,684440828,96428333,677704632,711148776,67112904,822991780,813952365,614121473,930860406,191841648,122181555,246834722,293667501,256010607,336400848,588204947,199254474,847805695,288978670,212811183,343222222,720954733,987154497,345789178,529395653,393123358,946964056,597793477,757280021,969167499,663723132,965198040,437338441,161913922,314012162,585727752,624237131,698138430,975859156,262088329,410215675,280586967,379614593,727117207,61085199,21934386,339553522,748684498,315672247,979669319,468359489,403321453,786899388,594801699,65231014,183311828,566628672,525201608,842339715,447624902,976908544,811682739,999439458,488966546,926494779,333149922,413966071,437504792,862632581,408944767,681429029,327082764,861354480,857594176,126839034,164956619,771632318,793841393,292814128,879004448,179650443,255197058,916001090,955812359,623877375,916827141,309067925,205590019,488486592,485154894,760624148,805191378,854089292,382378137,845023409,710267816,768491719,112772793,794519686,126249826,763801265,467831926,466823870,733351341,714751053,360726669,587940588,927905672,641180897,676555501,894653927,114498580,836761586,278957855,762327278,594813360,19972428,643837325,709417304,572986229,404875654,864669466,550860455,77069779,812732027,261608657,610600178,661651271,688523403,580455561,18741425,8824347,561512249,661590129,361928923,874191219,668315486,193678906,750035526,644166047,351539002,272509282,163358229,302630411,409255695,978381739,793894189,84457301,78993500,431571496,911155795,17214178,767879877,111485538,970573135,149245744,260949595,806810540,219623337,500724038,560514795,105193248,866973760,492616858,252328195,775898881,764404410,962245155,721323398,886674002,766729841,513300691,310199826,303218776,945591797,82572735,236200263,326215729,412561768,925682570,911245995,696523918,220229296,778014475,154245308,53252359,455712181,543341273,71582308,700480035,234564900,175695468,654784004,500217904,559064893,830312639,548188608,242506330,885856928,93680676,237417459,673461562,556201733,702319990,275239293,801607362,317987207,708234187,957201940,623885618,447655796,772522290,385761801,312085436,87299589,304523138,940550135,516530133,80533936,301187606,553910722,933735415,719379578,834219701,798669799,156759073,402184563,930801625,585820239,460402490,344833753,295825673,977178519,38665098,811930928,573550816,491846641,390724520,957986379,304813711,273405537,874674464,265490301,472037753,447378959,309937664,35448939,767755757,194961273,139243571,710909995,530764813,630692318,218974285,264987752,428775620,184830753,431671863,857415834,31093283,820728660,657269560,831967607,593759052,454045089,829405556,713638913,465865127,101396314,2037092,21543711,290082616,407870652,816659148,236034955,578173361,346965283,185861319,291367021,246378375,447586284,720363721,176750976,819977283,424726941,939622388,895232502,463935043,210601287,2113804,545639075,135375709,455251646,74133420,361730869,781127936,354619494,372475055,694751506,792766950,483591612,329242321,325666774,470676067,784454721,972782735,810824754,116129833,953531192,580577247,29425061,571685433,927635466,613201127,923574251,711992632,51894862,604939724,872095707,698595688,710711553,789072298,88439174,482198074,61575096,749820918,299737705,807571896,266400325,665798198,945760063,502684176,710704305,676157144,364951969,258867452,205101457,725024091,685119888,781336489,129066196,225321633,430764328,284119749,54820217,682213656,46015626,778379085,615037252,842503923,563714246,919209038,678744,6197963,671955652,451432123,496473483,161491022,5740366,771826390,762224701,676335311,607784056,632152631,280284569,769864433,242374446,621733171,359653127,292034111,326653607,583869647,854612332,921848921,556771416,959484448,585183047,223479112,909748487,767631144,631633834,883547177,968581371,212755946,176382373,942127588,722854821,229798441,460650793,531907494,104680875,518493283,743589318,886976801,937427837,177589303,780713114,4386849,329622363,592649562,84121868,787769807,489563982,817030624,362157706,145434964,426466179,451709702,245253322,408769360,633619250,510766565,614499870,650468009,725063015,377705711,391816452,508109788,183128936,158186854,364771677,316293376,475340135,878189955,578982477,929633079,34650102,727063706,32047895,568465967,553438075,912166318,608373904,735151904,493329637,687098219,454906354,995283719,202883101,158256731,301584910,785020937,233669335,210796509,741173880,263079898,519651057,199519368,397295945,266422732,467627559,809966566,965077715,796579615,335902146,802497804,564411842,801016614,924084212,847964367,913906316,80494616,123313866,958385171,893821454,699732825,797860743,831930813,989831642,602619564,141556640,563446698,605192724,36344576,526459758,5369163,516634308,420708031,458199205,733790203,786454751,67086061,929429791,694817205,632384322,205562758,244786323,442741363,215663898,84676630,131880432,82636188,929488432,134350510,108233464,457153963,155336815,673907326,68476057,172127234,235903601,768856789,596372449,934423270,271239013,466922972,3735337,87903356,601550467,113324129,708663532,633760936,947358921,186525031,388703260,106248154,580435590,170589869,738502851,920496437,63651928,58061592,777769988,839262321,4210053,221356077,676961904,409646161,941368294,207510928,395407231,128908199,533857108,97551693,930818038,78077110,11209994,873144208,37539477,204922572,963084726,158932361,355639668,392196834,968155647,659985340,901349476,662950518,264171352,798865280,56203116,298933685,243647023,903715640,670765308,719527961,577210026,820612496,365502030,337610057,367634242,347972179,718250861,290060601,815730371,586867088,517101766,854821413,627528052,108439901,278511775,706623457,320294643,963734517,618493520,598052139,612385769,23116100,386084090,626421836,896894191,864383961,166765429,164662069,185051035,462390734,563056571,354359298,725240638,227097250,19379508,15585296,273713404,546404402,973144886,898984254,296187320,59649371,577648083,676523330,628384429,725047960,308186795,640400354,222528995,112171778,315517655,522955880,424580754,824203472,409727825,765926282,154719180,124507955,82682815,739275280,159180377,230121776,169900035,646419759,564945513,526824137,257356558,871252324,560065782,182506705,452331019,129151249,106812245,703739827,959036999,972556605,164688832,552594119,709750578,428585493,463075453,534715165,963603096,644186147,74369402,101149396,138227270,418819735,893547252,563623338,29305619,898774779,607805583,289534221,30690326,266752259,448487914,487199302,986422067,599786254,351896510,783424370,519583214,73078431,258694235,726136375,725549373,580080736,629011990,509036432,921863186,135135329,415848347,576340482,287029604,885459892,383955333,907187659,960061917,570888653,256932823,271413686,556907716,983457088,233460729,75824654,808645813,641027823,731990878,685218286,137893758,935890905,689437487,517869530,355482984,898570256,168859218,864578897,861305268,362141201,911062583,633119044,73003665,173580663,891255771,211173582,695296755,331798509,141776770,669560429,896359264,931503192,719481674,941760176,802954036,552366209,75267937,890240491,25234860,879159241,979344330,692382532,94274370,824409646,427812748,898400068,615785170,288928682,759677134,202211084,655917437,382082115,219869785,67046242,794991582,343143582,276268264,869361501,597006153,876535018,916196823,121622490,504012363,366202734,453844565,70849428,271811684,522305484,3445591,435457551,353499871,758814131,840155048,719361635,592465919,948104664};
        int k = 455037882;
        long startTime = System.currentTimeMillis();
        System.out.println(subarrayGCD(arr, k));
        long stopTime = System.currentTimeMillis();
        System.out.println("Running time was " + (stopTime - startTime + 0.0) / 1000 + " seconds.");
    }
}
